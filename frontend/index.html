<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>OSA Dashboard</title>
  <link rel="stylesheet" href="styles.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <!-- Login -->
  <div id="login" class="view">
    <h1>OSA Dashboard</h1>
    <div class="card">
      <input id="user" placeholder="Usuario" autocomplete="username"/>
      <input id="pass" placeholder="Contraseña" type="password" autocomplete="current-password"/>
      <button id="btnLogin">Ingresar</button>
      <p class="hint">Demo: <strong>admin / admin123</strong></p>
      <p id="loginMsg" class="msg"></p>
    </div>
  </div>

  <!-- App -->
  <div id="app" class="hidden view">
    <header class="header">
      <h2>Dashboard OSA (On Shelf Availability)</h2>
      <button id="btnLogout" class="btn-logout">Salir</button>
    </header>

    <!-- Filtros -->
    <section class="filters card">
      <input id="fStore" placeholder="Filtrar por tienda (PV)" />
      <input id="fFrom" type="date" placeholder="Desde" />
      <input id="fTo" type="date" placeholder="Hasta" />
      <button id="btnApply">Aplicar</button>
    </section>

    <!-- KPIs -->
    <section class="kpis">
      <div class="kpi">
        <div class="kpi-title">Total</div>
        <div id="kTotal" class="kpi-value">0</div>
      </div>
      <div class="kpi">
        <div class="kpi-title">OSA %</div>
        <div id="kOsa" class="kpi-value">0</div>
      </div>
      <div class="kpi">
        <div class="kpi-title">OOS %</div>
        <div id="kOos" class="kpi-value">0</div>
      </div>
    </section>

    <!-- Gráficos -->
    <section class="charts-wrap">
      <div class="charts card">
        <canvas id="lineChart" aria-label="Tendencia OSA" role="img"></canvas>
      </div>
      <div class="charts card">
        <canvas id="pieChart" aria-label="OSA vs OOS" role="img"></canvas>
      </div>
    </section>

    <!-- Peores SKUs -->
    <section>
      <h3>Top 5 SKU con peor OSA</h3>
      <table id="tblWorst">
        <thead>
          <tr><th>Barcode</th><th>OSA %</th></tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>

    <!-- Últimas mediciones -->
    <section>
      <h3>Últimas mediciones</h3>
      <table id="tblItems">
        <thead>
          <tr>
            <th>Fecha</th><th>PV</th><th>SKU</th>
            <th>Estado</th><th>Tipo</th>
            <th>OSA</th><th>OOS</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>

    <!-- CRUD Tiendas -->
    <section>
      <h3>Tiendas a incorporar en las próximas visitas</h3>
      <div class="card" style="max-width:780px">
        <input id="sId" type="hidden" />
        <div class="grid-2">
          <input id="sName" placeholder="Nombre de tienda (PV)" />
          <input id="sProvincia" placeholder="Provincia" />
          <input id="sFormato" placeholder="Formato" />
          <input id="sCliente" placeholder="Cliente" />
        </div>
        <div class="actions">
          <button id="btnStoreSave">Guardar</button>
          <button id="btnStoreReset" class="btn-secondary">Limpiar</button>
        </div>
      </div>

      <table id="tblStores">
        <thead>
          <tr>
            <th>ID</th><th>Nombre</th><th>Provincia</th>
            <th>Formato</th><th>Cliente</th><th>Acciones</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>
  </div>

  <script src="app.js"></script>
</body>
</html>
